<!-- WinSW 2.12.0.0 ,test 09/11/2025-->
<!-- config for WinSW , rename winsw.exe to demojetty12sw.exe and same xml name-->
<service>
    <id>demojetty12</id>
    <name>demojetty12 App</name>
    <description>Your Jetty web application running as a Windows service.</description>

	<!-- กำหนดการเขียน log -->
    <logpath>%BASE%\logs</logpath>
    <log mode="roll-by-size-time">
        <sizeThreshold>10240</sizeThreshold> 
		<pattern>yyyyMMdd</pattern>
        <autoRollAtTime>00:00:00</autoRollAtTime>
    </log>
    <!-- กรณีต้องการปิด log (จะมีผลเฉพาะ stdout,stderror เท่านั้น) -->
    <!-- <log mode="none"/> -->

    <executable>"%BASE%\jre21\bin\java.exe"</executable>
    <startarguments>-Xrs -Xmx512m -jar "%BASE%\demojetty12.jar"</startarguments>
       
    <!-- เรียก shutdown แบบปลอดภัย -->
    <stopexecutable>"%BASE%\jre21\bin\java.exe"</stopexecutable>
	<stoparguments>-Xrs -Xmx512m -jar "%BASE%\demojetty12.jar" shutdown</stoparguments>
    <!-- ใช้ curl -->
    <!--<stopexecutable>"%BASE%\curl.exe"</stopexecutable>
	<stoparguments>-s "http://127.0.0.1:8080/shutdown?token=secret123"</stoparguments>-->
	<!-- กรณีไม่มี curl -->
	<!--<stopexecutable>powershell</stopexecutable>
	<stoparguments>-Command "Invoke-WebRequest -UseBasicParsing http://127.0.0.1:8080/shutdown?token=secret123"</stoparguments>-->

    <stoptimeout>60000</stoptimeout>
    <stopparentprocessfirst>false</stopparentprocessfirst>
</service>